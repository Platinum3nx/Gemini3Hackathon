# Argus ğŸ›¡ï¸
## Neuro-Symbolic AI Security Auditor

**Mathematically Verified Code Repair Powered by Gemini 3 + Lean 4**

Argus is a GitHub Action that combines the creativity of **Gemini 3** with the rigor of **Lean 4 formal proofs** to automatically find AND fix security vulnerabilities in Python code.

> **100% Reliable** â€” Not because we avoid AI, but because every AI-generated fix is **mathematically verified** before being accepted.

---

## ğŸ§  Neuro-Symbolic Architecture

Argus uses a **Neuro-Symbolic Repair Loop** that combines:

| Component | Role | Strength |
|-----------|------|----------|
| **Lean 4** (Symbolic) | Formal verification | 100% reliable proofs |
| **Gemini 3** (Neural) | Code understanding & repair | Creative problem-solving |

The key insight: **AI proposes, Math verifies.** Gemini generates fixes, but Lean 4 proves they're correct.

---

## ğŸ”„ How It Works

### The Neuro-Symbolic Repair Loop

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           ARGUS WORKFLOW                     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Python Code  â”‚
                              â”‚ (Your Repo)  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   AST Translation     â”‚
                         â”‚   (Python â†’ Lean 4)   â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                â”‚
                    â”‚         LEAN 4 PROVER          â”‚
                    â”‚    (Formal Verification)       â”‚
                    â”‚                                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚
                    â–¼                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  âœ… PROOF   â”‚           â”‚  âŒ PROOF   â”‚
            â”‚   PASSED    â”‚           â”‚   FAILED    â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                         â”‚
                   â–¼                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   SECURE    â”‚    â”‚      GEMINI 3           â”‚
            â”‚   (Done!)   â”‚    â”‚  "Why did this fail?"   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  "Generate a fix..."    â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚   Fixed Python Code   â”‚
                               â”‚   (AI-Generated)      â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚      LEAN 4 PROVER    â”‚
                               â”‚   (Verify the Fix)    â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                         â”‚
                              â–¼                         â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  âœ… PROOF   â”‚           â”‚  âŒ PROOF   â”‚
                      â”‚   PASSED    â”‚           â”‚   FAILED    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                             â”‚                         â”‚
                             â–¼                         â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ AUTO_PATCHEDâ”‚           â”‚ VULNERABLE  â”‚
                      â”‚  (Success!) â”‚           â”‚ (AI Failed) â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### The 4-Step Process

1. **Translate** â€” Deterministic AST parser converts Python â†’ Lean 4
2. **Verify** â€” Lean 4 attempts to prove safety properties
3. **Repair** â€” If proof fails, Gemini 3 analyzes the error and generates a fix
4. **Re-Verify** â€” Lean 4 proves the fix is correct (no hallucinations accepted!)

---

## ğŸ¤– Gemini 3 Integration

Argus leverages **Gemini 3** for intelligent code analysis and repair:

### Automated Code Repair
When Lean 4 detects a vulnerability, Gemini 3 acts as a **Formal Verification Security Engineer**:

- **Analyzes** the Lean error message to understand why the proof failed
- **Identifies** missing guards, checks, or edge cases
- **Generates** a corrected version of the Python code
- **Preserves** function signatures and original intent

### Error Explanation
Gemini 3 interprets cryptic Lean 4 errors into actionable insights:

```
Lean Error: "omega could not prove: balance - amount â‰¥ 0"
     â†“
Gemini: "The withdraw function can return negative balance. 
         Add a guard: if amount > balance, return balance unchanged."
```

### Why Neuro-Symbolic?

| Pure AI Approach | Pure Formal Methods | **Argus (Neuro-Symbolic)** |
|------------------|--------------------|-----------------------------|
| Fast but unreliable | Reliable but can't fix | Fast, reliable, AND fixes bugs |
| Hallucinations possible | No code generation | AI generates, Math verifies |
| "Probably correct" | "Correct but still broken" | **"Provably fixed"** |

---

## ğŸš€ Quick Start

### 1. Add the GitHub Action to your repo

Create `.github/workflows/argus_audit.yml`:

```yaml
name: Argus Security Audit

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  argus-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: Run Argus AI Auditor
        uses: Platinum3nx/Argus@main
        with:
          gemini_api_key: ${{ secrets.GEMINI_API_KEY }}
```

### 2. Add your Gemini API Key

1. Go to your repo â†’ Settings â†’ Secrets and variables â†’ Actions
2. Add a new secret: `GEMINI_API_KEY`
3. Get your key from [Google AI Studio](https://aistudio.google.com/apikey)

### 3. Push code and see results!

Argus will automatically audit Python files and attempt to fix any vulnerabilities.

---

## ğŸ“Š Example Output

```
Argus AI Audit Report

Summary
â€¢ Total Files Audited: 2
â€¢ âœ… Secure: 1
â€¢ ğŸ”§ Auto-Patched: 1
â€¢ âŒ Vulnerable: 0

Details

ğŸ”§ wallet_buggy.py
Status: AUTO_PATCHED
ğŸ”§ Repair Attempt: SUCCESS
- Fixed file: wallet_buggy_fixed.py
â–¶ View Fix
â–¶ View Formal Proof (Lean 4)

âœ… wallet_secure.py  
Status: SECURE
â–¶ View Formal Proof (Lean 4)
```

---

## ğŸ—ï¸ Architecture Components

| Component | File | Purpose |
|-----------|------|---------|
| **CI Runner** | `ci_runner.py` | Orchestrates audit + repair loop |
| **AST Translator** | `python_to_lean.py` | Python â†’ Lean 4 (deterministic) |
| **Lean Driver** | `lean_driver.py` | Runs Lean compiler, captures results |
| **AI Repair** | `ai_repair.py` | Gemini-powered code repair |
| **Agents** | `agents.py` | File auditing logic |

---

## ğŸ”’ Why It's Reliable

**The Math Can't Lie**

Even though Gemini 3 generates fixes, every fix is verified by Lean 4 before being accepted:

| Step | Tool | Can Hallucinate? |
|------|------|------------------|
| Translation | Python AST | No (deterministic) |
| Verification | Lean 4 | No (mathematical proof) |
| Repair | Gemini 3 | **Yes** |
| Re-Verification | Lean 4 | No (catches hallucinations) |

If Gemini's fix is wrong, Lean 4 rejects it. **No hallucination can pass the prover.**

---

## âš ï¸ Current Limitations

- Supports basic Python constructs (functions, if/else, arithmetic, comparisons)
- Focused on financial safety properties (balance â‰¥ 0)
- Single repair attempt per file (no retry loop yet)

---

## ğŸ› ï¸ Tech Stack

- **Python 3.11** â€” Backend and AST parsing
- **Lean 4.26.0** â€” Formal verification
- **Mathlib** â€” Lean tactics library
- **Gemini 3** â€” AI-powered code repair
- **Docker** â€” GitHub Action container
- **GitHub Actions** â€” CI/CD integration

---

## ğŸ“œ License

MIT License â€” see [LICENSE](LICENSE) for details.

---

Built for the **2026 Gemini 3 Hackathon** ğŸš€

*"AI proposes, Math verifies."*
